{% extends 'base.html' %}
{% load i18n %}
{% load staticfiles %}

{% block extra_css %}
{{ block.super }}
<link rel="stylesheet" href="{% static "css/bootstrap-datepicker.css" %}" />
{% endblock %}

{% block extra_js %}
{{ block.super }}
<script src="{% static "jQuery-File-Upload/js/vendor/jquery.ui.widget.js" %}"></script>
<script src="{% static "jQuery-File-Upload/js/jquery.iframe-transport.js" %}"></script>
<script src="{% static "jQuery-File-Upload/js/jquery.fileupload.js" %}"></script>
<script src="{% static "js/bootstrap-datepicker.js" %}"></script>
{% endblock %}

{% block title %}{% if object %}{% trans "Edit speech" %} {% else %}{% trans "Add speech" %}{% endif %}{% endblock %}

{% block content %}
<p class="lead {% if object %}edit{% else %}add{% endif %}-speech">
    {% if object %}
        {% trans "Here is where you can edit a speech." %}
    {% else %}
        {% trans "Here is where you can add a new speech." %}
    {% endif %}
</p>

<p id="question" class="hidden{% if not object and not form.non_field_errors %} visible-js{% endif %}">

    {% trans "Do you have" %}
    <a href="#" id="audio-link">{% trans "Audio" %}</a> 
    {% trans "to upload," %}
    <a href="#" id="text-link">{% trans "Text" %}</a> 
    {% trans "to enter, or" %}
    <a href="#" id="both-link">{% trans "Both" %}</a>? 
</p>

<form id="speech-form" class="form-horizontal{% if not object and not form.non_field_errors %} hidden-js{% endif %}" method="post" enctype="multipart/form-data">
    {% if object %}
        {% include 'speeches/form.html' with type="speech" submit="Update speech" %}
    {% else %}
    {% include 'speeches/form.html' with type="speech" submit="Add speech" alt_submit_name="add_another" alt_submit_text="Save and add another speech" %}
    {% endif %}
</form>

<script>
    function check_enable_save_and_add_another (event) {
        var id_section = $(this)
        if (id_section.val()) {
            $('#speech_alt_submit').attr({ disabled:false })
        } else {
            $('#speech_alt_submit').attr({ disabled:true })
        }
    }

    $(function() {
        $('#id_section').on('change', check_enable_save_and_add_another)
    })

    check_enable_save_and_add_another.apply($('#id_section'))

</script>


{% endblock %}
