{% extends 'base.html' %}
{% load staticfiles %}
{% load url from future %}
{% load humanize %}
{% load i18n %}

{% block title %}Recording #{{ object.id }}{% endblock %}

{% block content %}

<div class="page-header">
    <h1>Recording #{{ object.id }}</h1>

    <p>This recording was created {{ object.created|naturaltime }}.
    It consists of {{ object.timestamps.count|apnumber }} timestamps.
</div>

<ul>
{% for ts in object.timestamps.all %}
    <li>{{ ts.timestamp }} &ndash;
    {% if ts.speech %}
      {% with ts.speech as speech %}
        {% if not speech.is_public %}<span class="label label-info">Invisible</span>{% endif %}
        <span class="speech-speaker"> <strong>{{ speech.speaker|default_if_none:"Unknown Speaker" }}</strong></span>
        <span class="speech-summary"> said <a href="{%url "speech-view" speech.id%}"><em>&#8220;{{ speech.summary}}&#8221;</em></a></span>
        <span class="speech-date muted"><small>{{ speech.start_date|default_if_none:"Undated" }} </small></span>
      {% endwith %}
    {% else %}
        no attached speech.
    {% endif %}
{% empty %}
    <li>This recording had no associated timestamps (normally shouldn't happen).</li>
{% endfor %}
</ul>

<h2>Actions</h2>

<form class="form-horizontal" method="post">{% csrf_token %}

    {% if form.non_field_errors %}
        <div class="alert alert-error alert-block">
            {{ form.non_field_errors }}
        </div>
    {% endif %}

    {% for hidden in form.hidden_fields %}
        {{ hidden }}
    {% endfor %}

    {% for field in form.visible_fields %}
        <div class="control-group {% if field.errors %}error{% endif %}" id="{{ field.auto_id}}_controls">
            {{ field.label_tag }}
            <div class="controls">
                {{ field }}
                {% if field.errors %}
                    <span class="help-inline">{{ field.errors }}</span>
                {% endif %}
                <span class="help-inline">{{ field.help_text }}</span>
            </div>
        </div>
    {% endfor %}

    <div class="form-actions">
        <input type="submit" id="section_submit" class="btn" value="{% trans "Update" %}">
    </div>
</form>

{% endblock %}

